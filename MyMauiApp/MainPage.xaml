<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:MyMauiApp.ViewModels"
             xmlns:models="clr-namespace:MyMauiApp.Models"
             x:Class="MyMauiApp.MainPage"
             x:DataType="viewmodels:MainViewModel">

    <Grid RowDefinitions="Auto,*,Auto" Padding="20">

        <!-- Header -->
        <VerticalStackLayout Grid.Row="0" Spacing="10">
            <Label
                Text="{Binding Greeting}"
                Style="{StaticResource Headline}"
                SemanticProperties.HeadingLevel="Level1"
                HorizontalOptions="Center" />

            <Button
                Text="Add Person"
                Command="{Binding AddPersonCommand}"
                HorizontalOptions="Center" />
        </VerticalStackLayout>

        <!-- People List -->
        <CollectionView
            Grid.Row="1"
            ItemsSource="{Binding People}"
            Margin="0,20,0,20">
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="models:Person">
                    <Frame Margin="0,5" Padding="15" CornerRadius="8">
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer
                                Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodels:MainViewModel}}, Path=EditPersonCommand}"
                                CommandParameter="{Binding .}" />
                        </Frame.GestureRecognizers>
                        <Grid ColumnDefinitions="*,Auto">
                            <VerticalStackLayout Grid.Column="0">
                                <Label
                                    Text="{Binding Name}"
                                    FontSize="18"
                                    FontAttributes="Bold" />
                                <Label
                                    Text="{Binding Email}"
                                    FontSize="14"
                                    TextColor="Gray" />
                            </VerticalStackLayout>
                            <Label
                                Grid.Column="1"
                                Text=">"
                                FontSize="20"
                                VerticalOptions="Center"
                                TextColor="Gray" />
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
            <CollectionView.EmptyView>
                <Label
                    Text="No people added yet. Tap 'Add Person' to get started."
                    HorizontalOptions="Center"
                    VerticalOptions="Center"
                    TextColor="Gray" />
            </CollectionView.EmptyView>
        </CollectionView>

        <!-- Footer -->
        <HorizontalStackLayout Grid.Row="2" Spacing="10" HorizontalOptions="Fill">
            <Button
                Text="Arduino"
                Command="{Binding GoToArduinoCommand}"
                HorizontalOptions="FillAndExpand" />
            <Button
                Text="Settings"
                Command="{Binding GoToSettingsCommand}"
                HorizontalOptions="FillAndExpand" />
        </HorizontalStackLayout>

    </Grid>

</ContentPage>
